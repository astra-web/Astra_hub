local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local player = Players.LocalPlayer

pcall(function()
    player.PlayerGui:FindFirstChild("AstraUniversalHub"):Destroy()
end)

local savedCFrame = nil
local fullBrightOn = false
local oldLighting = {
    Brightness = Lighting.Brightness,
    ClockTime = Lighting.ClockTime,
    FogEnd = Lighting.FogEnd,
    Ambient = Lighting.Ambient,
    OutdoorAmbient = Lighting.OutdoorAmbient
}

local function getHRP()
    local char = player.Character or player.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart",5)
end

local function savePosition()
    local hrp = getHRP()
    if hrp then
        savedCFrame = hrp.CFrame
    end
end

local function tpSaved()
    if not savedCFrame then return end
    local hrp = getHRP()
    if not hrp then return end
    hrp.Anchored = true
    hrp.CFrame = savedCFrame
    task.wait(0.1)
    hrp.Anchored = false
end

local function tpMap()
    local hrp = getHRP()
    if not hrp then return end
    hrp.Anchored = true
    hrp.CFrame = CFrame.new(59,-60,-77)
    task.wait(0.1)
    hrp.Anchored = false
end

local function toggleFullBright()
    fullBrightOn = not fullBrightOn
    if fullBrightOn then
        Lighting.Brightness = 5
        Lighting.ClockTime = 14
        Lighting.FogEnd = 1e9
        Lighting.Ambient = Color3.new(1,1,1)
        Lighting.OutdoorAmbient = Color3.new(1,1,1)
    else
        Lighting.Brightness = oldLighting.Brightness
        Lighting.ClockTime = oldLighting.ClockTime
        Lighting.FogEnd = oldLighting.FogEnd
        Lighting.Ambient = oldLighting.Ambient
        Lighting.OutdoorAmbient = oldLighting.OutdoorAmbient
    end
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AstraUniversalHub"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = player:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0,300,0,260)
Frame.Position = UDim2.new(0.5,-150,0.5,-130)
Frame.BackgroundColor3 = Color3.fromRGB(20,20,20)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui
Instance.new("UICorner",Frame).CornerRadius = UDim.new(0,12)

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1,0,0,40)
Title.BackgroundTransparency = 1
Title.Text = "Astra Universal Hub"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Title.TextColor3 = Color3.new(1,1,1)
Title.Parent = Frame

local function makeBtn(text,y)
    local b = Instance.new("TextButton")
    b.Size = UDim2.new(0,260,0,38)
    b.Position = UDim2.new(0.5,-130,0,y)
    b.BackgroundColor3 = Color3.fromRGB(40,40,40)
    b.Text = text
    b.Font = Enum.Font.Gotham
    b.TextSize = 14
    b.TextColor3 = Color3.new(1,1,1)
    b.Parent = Frame
    Instance.new("UICorner",b).CornerRadius = UDim.new(0,10)
    return b
end

local saveBtn = makeBtn("Save Position",50)
local tpSavedBtn = makeBtn("Teleport To Saved",95)
local fbBtn = makeBtn("Full Bright : OFF",140)
local mapBtn = makeBtn("Teleport To Map",185)

saveBtn.MouseButton1Click:Connect(savePosition)
tpSavedBtn.MouseButton1Click:Connect(tpSaved)
fbBtn.MouseButton1Click:Connect(function()
    toggleFullBright()
    fbBtn.Text = fullBrightOn and "Full Bright : ON" or "Full Bright : OFF"
end)
mapBtn.MouseButton1Click:Connect(tpMap)

player.CharacterAdded:Connect(function()
    task.wait(1)
    ScreenGui.Parent = player.PlayerGui
end)
